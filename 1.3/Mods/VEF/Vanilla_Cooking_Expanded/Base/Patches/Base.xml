<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <!-- Move mods research to hidden tab -->

	<Operation Class="PatchOperationReplace">
		<xpath>
			Defs/ResearchProjectDef[
				   defName = "VCE_CondimentsResearch"
				or defName = "VCE_SoupCooking"
				or defName = "VCE_Grilling"
				or defName = "VCE_DeepFrying"
				or defName = "VCE_Canning"
				or defName = "VCE_CheeseMaking"
			]/tab
		</xpath>
		<value>
			<tab>DuneRef_Hidden</tab>
		</value>
	</Operation>

    <!-- remove prerequisites so no funky stuff happens when we try to unlock them automatically -->

	<Operation Class="PatchOperationRemove">
		<xpath>
			Defs/ResearchProjectDef[
				   defName = "VCE_SoupCooking"
				or defName = "VCE_Grilling"
				or defName = "VCE_DeepFrying"
				or defName = "VCE_Canning"
			]/prerequisites
		</xpath>
	</Operation>

    <!-- Add techs to RimCivTechTree researches -->

	<Operation Class="PatchOperationAdd">
		<xpath>
			Defs/ResearchProjectDef[
				   defName = "DuneRef_Pottery"
			]/modExtensions/li[@Class="DuneRef_RimCivTechTree.ResearchUnlocks"]/researchUnlocks
		</xpath>
		<value>
			<li>VCE_CondimentsResearch</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>
			Defs/ResearchProjectDef[
				   defName = "DuneRef_Ecology"
			]/modExtensions/li[@Class="DuneRef_RimCivTechTree.ResearchUnlocks"]/researchUnlocks
		</xpath>
		<value>
			<li>VCE_SoupCooking</li>
			<li>VCE_DeepFrying</li>
			<li>VCE_Canning</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>
			Defs/ResearchProjectDef[
				   defName = "DuneRef_IronWorking"
			]/modExtensions/li[@Class="DuneRef_RimCivTechTree.ResearchUnlocks"]/researchUnlocks
		</xpath>
		<value>
			<li>VCE_Grilling</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>
			Defs/ResearchProjectDef[
				   defName = "DuneRef_WritingAndCulture"
			]/modExtensions/li[@Class="DuneRef_RimCivTechTree.ResearchUnlocks"]/researchUnlocks
		</xpath>
		<value>
			<li>VCE_CheeseMaking</li>
		</value>
	</Operation>

    <!-- Hide tabs created by this mod -->

	<Operation Class="PatchOperationAdd">
		<xpath>
			Defs/ResearchTabDef[defName = "VCE_Cooking"]
		</xpath>
		<value>
			<modExtensions>
				<li Class="DuneRef_RimCivTechTree.HiddenTab">
					<hidden>True</hidden>
				</li>
			</modExtensions>
		</value>
	</Operation>

</Patch>