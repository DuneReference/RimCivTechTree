<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <!-- Hide old techs & Remove prerequisites -->

    <!-- Medieval -->

    <Operation Class="PatchOperationAdd">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "NobleApparel"
                or defName = "RoyalApparel"
                or defName = "Harp"
                or defName = "Harpsichord"
            ]
        </xpath>
        <value>
            <tab>DuneRef_Hidden</tab>
        </value>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "NobleApparel"
                or defName = "RoyalApparel"
                or defName = "Harp"
                or defName = "Harpsichord"
            ]/prerequisites
        </xpath>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "RoyalApparel"
            ]/hiddenPrerequisites
        </xpath>
    </Operation>

    <!-- Industrial -->

    <Operation Class="PatchOperationAdd">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "JumpPack"
                or defName = "Gunlink"
                or defName = "Piano"
            ]
        </xpath>
        <value>
            <tab>DuneRef_Hidden</tab>
        </value>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "JumpPack"
                or defName = "Gunlink"
                or defName = "Piano"
            ]/prerequisites
        </xpath>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "JumpPack"
            ]/hiddenPrerequisites
        </xpath>
    </Operation>

    <!-- Spacer -->

    <Operation Class="PatchOperationAdd">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "CataphractArmor"
                or defName = "SpecializedLimbs"
                or defName = "CompactWeaponry"
                or defName = "VenomSynthesis"
            ]
        </xpath>
        <value>
            <tab>DuneRef_Hidden</tab>
        </value>
    </Operation>

    <!-- Conditional because EPOE adds tab -->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/ResearchProjectDef[defName = "BrainWiring"]/tab</xpath>
        <match Class="PatchOperationReplace">
            <xpath>Defs/ResearchProjectDef[defName = "BrainWiring"]/tab</xpath>
            <value>
                <tab>DuneRef_Hidden</tab>
            </value>
        </match>
        <nomatch Class="PatchOperationAdd">
            <xpath>Defs/ResearchProjectDef[defName = "BrainWiring"]</xpath>
            <value>
                <tab>DuneRef_Hidden</tab>
            </value>
        </nomatch>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "CataphractArmor"
                or defName = "BrainWiring"
                or defName = "SpecializedLimbs"
                or defName = "CompactWeaponry"
                or defName = "VenomSynthesis"
            ]/prerequisites
        </xpath>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "BrainWiring"
                or defName = "SpecializedLimbs"
                or defName = "CompactWeaponry"
            ]/hiddenPrerequisites
        </xpath>
    </Operation>

    <!-- Ultra -->

    <Operation Class="PatchOperationAdd">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "ArtificialMetabolism"
                or defName = "NeuralComputation"
                or defName = "SkinHardening"
                or defName = "HealingFactors"
                or defName = "FleshShaping"
                or defName = "MolecularAnalysis"
                or defName = "CircadianInfluence"
            ]
        </xpath>
        <value>
            <tab>DuneRef_Hidden</tab>
        </value>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "ArtificialMetabolism"
                or defName = "NeuralComputation"
                or defName = "SkinHardening"
                or defName = "HealingFactors"
                or defName = "FleshShaping"
                or defName = "MolecularAnalysis"
                or defName = "CircadianInfluence"
            ]/prerequisites
        </xpath>
    </Operation>

    <Operation Class="PatchOperationRemove">
        <xpath>
            Defs/ResearchProjectDef[
                   defName = "ArtificialMetabolism"
                or defName = "NeuralComputation"
                or defName = "SkinHardening"
                or defName = "HealingFactors"
                or defName = "FleshShaping"
                or defName = "MolecularAnalysis"
                or defName = "CircadianInfluence"
            ]/hiddenPrerequisites
        </xpath>
    </Operation>

</Patch>